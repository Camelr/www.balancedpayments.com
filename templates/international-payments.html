{% extends 'layout.html' %}

{% block body %}
<div class="bg-default">
	<section class="page-header large-bottom-margin">
		<div class="background-image"></div>
		<div class="title-image"></div>
	</section>

	<div class="container">
		<div class="row">
			<div class="span19">
				<div class="row large-bottom-margin">
					<div class="page-subtitle clearfix">
						<div class="span16">
							<span>{{ page.metadata.subtitle.heading }}</span>
						</div>
					</div>

					<div class="timeline span19 large-bottom-margin">
						<h3>Implementation roadmap</h3>
						<div class="span6">
							<span class="step">1</span>
							<span class="title current">{{page.metadata.timeline.title1}}</span>
							<div class="phase">{{page.metadata.timeline.phase1}}</div>
						</div>
						<div class="span7">
							<span class="step">2</span>
							<span class="title">{{page.metadata.timeline.title2}}</span>
							<div class="phase">{{page.metadata.timeline.phase2}}</div>
						</div>
						<div class="span6">
							<span class="step">3</span>
							<span class="title">{{page.metadata.timeline.title3}}</span>
							<div class="phase">{{page.metadata.timeline.phase3}}</div>
						</div>
					</div>

					<div class="span19">
						<div class="tag">
							<div>
								<span class="title">{{page.metadata.launch.title}}</span>
							</div>
							<div>
								<span class="month">{{page.metadata.launch.month}}</span>
								<span class="day">{{page.metadata.launch.day}}</span>
							</div>
						</div>
						<div class="span17 pull-right">
							<p class="page-summary">
								{{ page.metadata.what.bodyText }}
							</p>
							<p class="page-summary">
								<a href="{{ page.metadata.what.linkUrl }}">{{ page.metadata.what.linkText }}</a>
							</p>
						</div>
					</div>
				</div>

				<div class="forex large-bottom-margin">
					<div class="forex-map">
						<div class="pin animate-brl"></div>
						<div class="pin animate-cad"></div>
						<div class="pin animate-eur"></div>

						<div class="forex-map-sidebar">
							{{page.metadata.forexMapText}}
							<div class="currency-conversion"></div>
							<div class="view-all">
								<span>View supported currencies</span>
								<i class="icon-carat-down"></i>
							</div>
						</div>
					</div>
					<div class="currency-list clearfix">
						{% for currency in page.metadata.currencies.list %}
							<div class="span4">
								<div class="symbol">{{currency.symbol}}</div>
								<div class="name">{{currency.name}}</div>
							</div>
						{% endfor %}
						<div class="close">Close</div>
					</div>
				</div>

				<section>
					<div class="section-bg content clearfix">
						<div class="section-title section-title-no-width">
							<div class="title-wrapper span6">
								<span>{{page.metadata.benefit1.title}}</span>
								<p>{{page.metadata.benefit1.body}}</p>
							</div>
							<div class="benefit1 folded-box span13 pull-right">
								<div class="row">
									<div class="handbag span3"></div>
									<div class="span7 pull-right">
										<div class="title top-padding">Checkout</div>
										<div class="local-currency">£ 120.00</div>
										<div class="icon-card span2"></div>
										<div class="card-info offset1">
											<div>Jessica Lauren</div>
											<div>xxxx xxxx xxxx 4896</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="section-bg content clearfix">
						<div class="section-title section-title-no-width">
							<div class="title-wrapper span6">
								<span>{{page.metadata.benefit2.title}}</span>
								<p>{{page.metadata.benefit2.body}}</p>
							</div>
							<div class="benefit2 folded-box span13 pull-right">
								<div class="title">Credit card statement</div>
								<div class="card-info">
									<div>Jessica Lauren</div>
									<div>xxxx xxxx xxxx 4896</div>
								</div>
								<table class="table table-condensed">
									<thead>
										<tr>
											<th>Date</th>
											<th>Description</th>
											<th class="amount-header">Amount</th>
										</tr>
									</thead>
									<tbody>
									<tr>
										<td>Oct 22</td>
										<td>BAL*ZUPPA 74120 JHall</td>
										<td class="amount">£ 120.00</td>
									</tr>
									<tr>
										<td>Oct 17</td>
										<td>BAL*ZUPPA 74103 JHall</td>
										<td class="amount">£ 78.00</td>
									</tr>
									<tr>
										<td>Oct 10</td>
										<td>BAL*ZUPPA 74726 JHall</td>
										<td class="amount">£ 32.50</td>
									</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>
					<div class="section-bg content clearfix">
						<div class="section-title section-title-no-width">
							<div class="title-wrapper span6">
								<span>{{page.metadata.benefit3.title}}</span>
								<p>{{page.metadata.benefit3.body}}</p>
							</div>
							<div class="code-sample span13 pull-right">
								<div class="title">Example</div>
								<pre>
> balanced.exchangeRate(10000, <span class="s2">"USD"</span>, <span class="s2">"EUR"</span>)
72.35</pre>	
							</div>
						</div>
					</div>
					<div class="section-bg content clearfix">
						<div class="section-title section-title-no-width">
							<div class="title-wrapper span6">
								<span>{{page.metadata.api.title}}</span>
								<p>{{page.metadata.api.body}}</p>
							</div>
							<div class="code-sample span13 pull-right">
								<div class="title">Request</div>
<pre>
curl https://api.balancedpayments.com/cards/CC5cX8TtoEgQ7nY3a8pj5D7f/debits <span class="se">\</span>
 -H <span class="s2">"Accept: application/vnd.api+json;revision=1.1"</span> <span class="se">\</span>
 -u ak-test-2qEM0Znvd8LIVbZ01LbFHvHgab4fkNr3c: <span class="se">\</span>
 -d <span class="s2">"amount=100"</span> <span class="se">\</span>
 -d <span class="s2">"currency=EUR"</span>
 </pre>
							</div>
							<div class="code-sample span13 pull-right">
								<div class="title">Response *</div>
								<pre>
<span class="p">{</span>
  <span class="s2">"debits"</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">"status"</span><span class="o">:</span> <span class="s2">"succeeded"</span>,
      <span class="s2">"currency"</span><span class="o">:</span> <span class="s2">"EUR"</span>,
      <span class="s2">"amount"</span><span class="o">:</span> <span class="s2">100</span>,
      <span class="s2">"href"</span><span class="o">:</span> <span class="s2">"/debits/WD72u8rXuaBjt3qdNjxNRG3L"</span>,
      <span class="s2">"appears_on_statement_as"</span><span class="o">:</span> <span class="s2">"BAL*example.com"</span>,
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span></pre>
<div class="note">* Some parts of the response have been ommitted for brevity.</div>
							</div>

						</div>
					</div>

					<div class="section-bg content clearfix">
						<div class="section-title section-title-no-width">
							<div class="title-wrapper span6">
								<span>{{page.metadata.pricing.title}}</span>
								<p>{{page.metadata.pricing.body}}</p>
								<p><a href="{{ page.metadata.pricing.linkUrl }}">{{ page.metadata.pricing.linkText }}</a></p>
							</div>
							<div class="fee span13 pull-right">
								<div class="title">Foreign currency conversion fee</div>
								<div class="forex-image"></div>
							</div>
						</div>
					</div>

					<div class="section-bg feedback clearfix">
						<div class="send-email span8">
							<span class="title">{{page.metadata.feedback.title}}</span>
							<p class="title">{{page.metadata.feedback.body}}</p>
							<a class="light" href='mailto:{{page.metadata.feedback.email}}'>{{page.metadata.feedback.email}}</a>
						</div>
						<div class="notify-me span8 pull-right">
							<p class="title">{{page.metadata.feedback.notifyMe}}</p>

							<div id="mc_embed_signup">
								<form action="http://balancedpayments.us2.list-manage.com/subscribe/post?u=30382d347d3689814ca424c89&amp;id=c8d0241856" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
									<div class="mc-field-group">
										<input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL" placeholder="Email">
										<input class="btn" type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe">
									</div>
									<div id="mce-responses" class="clear">
										<div class="response" id="mce-error-response" style="display:none"></div>
										<div class="response" id="mce-success-response" style="display:none"></div>
									</div>
								    <div style="position: absolute; left: -5000px;">
								    	<input type="text" name="b_30382d347d3689814ca424c89_c8d0241856" value="">
							    	</div>
								</form>
							</div>
						</div>
					</div>

					<div class="section-bg content faqs clearfix">
						<div class="title">{{page.metadata.faqs.title}}</div>
						
							{% for faq in page.metadata.faqs.list %}
								<div class="faq span8">
									<p class="q">{{faq.q}}</p>
									<p class="a">{{faq.a}}</p>
								</div>
							{% endfor %}
					</div>
				</section>
			</div>
		</div>
	</div>
</div>

<script src="/static/js/customer-lib.min.js"></script>
<script type="text/javascript">$(balanced.international)</script>
<script type="text/javascript">
var fnames = new Array();var ftypes = new Array();fnames[0]='EMAIL';ftypes[0]='email';fnames[1]='FNAME';ftypes[1]='text';fnames[2]='LNAME';ftypes[2]='text';
try {
    var jqueryLoaded=jQuery;
    jqueryLoaded=true;
} catch(err) {
    var jqueryLoaded=false;
}
var head= document.getElementsByTagName('head')[0];
if (!jqueryLoaded) {
    var script = document.createElement('script');
    script.type = 'text/javascript';
    script.src = '//ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js';
    head.appendChild(script);
    if (script.readyState && script.onload!==null){
        script.onreadystatechange= function () {
              if (this.readyState == 'complete') mce_preload_check();
        }    
    }
}

var err_style = '';
try{
    err_style = mc_custom_error_style;
} catch(e){
    err_style = '#mc_embed_signup input.mce_inline_error{border-color:#6B0505;} #mc_embed_signup div.mce_inline_error{margin: 0 0 1em 0; padding: 5px 10px; background-color:#6B0505; font-weight: bold; z-index: 1; color:#fff;}';
}
var head= document.getElementsByTagName('head')[0];
var style= document.createElement('style');
style.type= 'text/css';
if (style.styleSheet) {
  style.styleSheet.cssText = err_style;
} else {
  style.appendChild(document.createTextNode(err_style));
}
head.appendChild(style);
setTimeout('mce_preload_check();', 250);

var mce_preload_checks = 0;
function mce_preload_check(){
    if (mce_preload_checks>40) return;
    mce_preload_checks++;
    try {
        var jqueryLoaded=jQuery;
    } catch(err) {
        setTimeout('mce_preload_check();', 250);
        return;
    }
    var script = document.createElement('script');
    script.type = 'text/javascript';
    script.src = 'http://downloads.mailchimp.com/js/jquery.form-n-validate.js';
    head.appendChild(script);
    try {
        var validatorLoaded=jQuery("#fake-form").validate({});
    } catch(err) {
        setTimeout('mce_preload_check();', 250);
        return;
    }
    mce_init_form();
}
function mce_init_form(){
    jQuery(document).ready( function($) {
	  $('#mce-EMAIL').focus(function() {
		$(this).removeClass('mce_inline_error');
	  });
      var options = { errorClass: 'mce_inline_error', errorElement: 'div', onkeyup: function(){}, onfocusout:function(){}, onblur:function(){}  };
      var mce_validator = $("#mc-embedded-subscribe-form").validate(options);
      $("#mc-embedded-subscribe-form").unbind('submit');//remove the validator so we can get into beforeSubmit on the ajaxform, which then calls the validator
      options = { url: 'http://balancedpayments.us2.list-manage.com/subscribe/post-json?u=30382d347d3689814ca424c89&id=c8d0241856&c=?', type: 'GET', dataType: 'json', contentType: "application/json; charset=utf-8",
                    beforeSubmit: function(){
                        $('#mce_tmp_error_msg').remove();
                        $('.datefield','#mc_embed_signup').each(
                            function(){
                                var txt = 'filled';
                                var fields = new Array();
                                var i = 0;
                                $(':text', this).each(
                                    function(){
                                        fields[i] = this;
                                        i++;
                                    });
                                $(':hidden', this).each(
                                    function(){
                                        var bday = false;
                                        if (fields.length == 2){
                                            bday = true;
                                            fields[2] = {'value':1970};//trick birthdays into having years
                                        }
                                    	if ( fields[0].value=='MM' && fields[1].value=='DD' && (fields[2].value=='YYYY' || (bday && fields[2].value==1970) ) ){
                                    		this.value = '';
									    } else if ( fields[0].value=='' && fields[1].value=='' && (fields[2].value=='' || (bday && fields[2].value==1970) ) ){
                                    		this.value = '';
									    } else {
									        if (/\[day\]/.test(fields[0].name)){
    	                                        this.value = fields[1].value+'/'+fields[0].value+'/'+fields[2].value;									        
									        } else {
    	                                        this.value = fields[0].value+'/'+fields[1].value+'/'+fields[2].value;
	                                        }
	                                    }
                                    });
                            });
                        $('.phonefield-us','#mc_embed_signup').each(
                            function(){
                                var fields = new Array();
                                var i = 0;
                                $(':text', this).each(
                                    function(){
                                        fields[i] = this;
                                        i++;
                                    });
                                $(':hidden', this).each(
                                    function(){
                                        if ( fields[0].value.length != 3 || fields[1].value.length!=3 || fields[2].value.length!=4 ){
                                    		this.value = '';
									    } else {
									        this.value = 'filled';
	                                    }
                                    });
                            });
                        return mce_validator.form();
                    }, 
                    success: mce_success_cb
                };
      $('#mc-embedded-subscribe-form').ajaxForm(options);
    });
}

function mce_success_cb(resp){
    $('#mce-success-response').hide();
    $('#mce-error-response').hide();
    if (resp.result=="success"){
    	$('.notify-me .title').hide();
    	$('.notify-me .mc-field-group').hide();
        $('#mce-'+resp.result+'-response').fadeIn(200);
        $('#mce-'+resp.result+'-response').html("To complete the process, please click the link in the email we just sent you.");
        $('#mc-embedded-subscribe-form').each(function(){
            this.reset();
    	});
    } else {
        var index = -1;
        var msg;
        try {
            var parts = resp.msg.split(' - ',2);
            if (parts[1]==undefined){
                msg = resp.msg;
            } else {
                i = parseInt(parts[0]);
                if (i.toString() == parts[0]){
                    index = parts[0];
                    msg = parts[1];
                } else {
                    index = -1;
                    msg = resp.msg;
                }
            }
        } catch(e){
            index = -1;
            msg = resp.msg;
        }
        try{
            if (index== -1){
                $('#mce-'+resp.result+'-response').show();
                $('#mce-'+resp.result+'-response').html(msg);            
            } else {
                err_id = 'mce_tmp_error_msg';
                html = '<div id="'+err_id+'" style="'+err_style+'"> '+msg+'</div>';
                
                var input_id = '#mc_embed_signup';
                var f = $(input_id);
                if (ftypes[index]=='address'){
                    input_id = '#mce-'+fnames[index]+'-addr1';
                    f = $(input_id).parent().parent().get(0);
                } else if (ftypes[index]=='date'){
                    input_id = '#mce-'+fnames[index]+'-month';
                    f = $(input_id).parent().parent().get(0);
                } else {
                    input_id = '#mce-'+fnames[index];
                    f = $().parent(input_id).get(0);
                }
                if (f){
                    $(f).append(html);
                    $(input_id).focus();
                } else {
                    $('#mce-'+resp.result+'-response').show();
                    $('#mce-'+resp.result+'-response').html(msg);
                }
            }
        } catch(e){
            $('#mce-'+resp.result+'-response').show();
            $('#mce-'+resp.result+'-response').html(msg);
        }
        $('#mc-embedded-subscribe-form').each(function(){
            this.reset();
    	});
    }
}

</script>
{% endblock %}
